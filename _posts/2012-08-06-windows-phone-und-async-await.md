---
layout: post
section-type: post
title: Windows Phone und async / await
category: Unknown
tags: []
---
<p>Lange Zeit galt die asynchrone Programmierung als steiniges Terrain, auf dass sich nur erfahrene und/oder masochistische Entwickler freiwillig eingelassen haben. Mittlerweile gibt es jedoch ein paar Hilfsmittel im .NET-Framework, welche die asynchrone Programmierung deutlich vereinfachen und einen Großteil der früheren Komplexität nehmen. Die Rede ist von den beiden Schlüsselwörtern “async” und “await”.</p>  <p><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="await" border="0" alt="await" src="http://anheledirwp.blob.core.windows.net/wordpress/2012/08/await.png" width="410" height="80" /></p>  <p>Dieser Artikel soll jetzt nicht die beiden Schlüsselwörter erklären. Wer dazu noch Lektüre braucht kann sich die folgenden Artikel zu Gemüte führen:</p>  <ul>   <li><a href="http://msdn.microsoft.com/de-de/magazine/hh456401.aspx">Einfachere asynchrone Programmierung mit der neuen Visual Studio Async CTP</a> </li>    <li><a href="http://msdn.microsoft.com/de-de/magazine/hh456403.aspx">Wiedergabe und Pause mit „await“</a> </li>    <li><a href="http://msdn.microsoft.com/de-DE/async">Visual Studio Asynchronous Programming (en)</a> </li>    <li><a href="http://msdn.microsoft.com/de-de/magazine/hh456402.aspx">Asynchrone Leistung: Leistungseinbußen aufgrund von „async“ und „await“</a> </li> </ul>  <p>Wirklich spannend wird die Verwendung von async und await in den Bereichen, in denen man nicht die Wahl hat sondern nur asynchron arbeiten kann. Und wie es der Zufall so will steht genau so ein Anwendungsfall hier über dem Artikel: Das Windows Phone <img style="border-bottom-style: none; border-left-style: none; border-top-style: none; border-right-style: none" class="wlEmoticon wlEmoticon-winkingsmile" alt="Zwinkerndes Smiley" src="http://anheledirwp.blob.core.windows.net/wordpress/2012/08/wlEmoticon-winkingsmile.png" /></p>  <p>Wer bereits mit Visual Studio 2012 (RC oder RTM) arbeitet und Anwendungen für .NET 4.5 oder die neuen Metro-Style-Apps entwickelt, braucht keine weiteren Tools. Für frühere Versionen des .NET-Frameworks oder auch Silverlight braucht man jedoch das so genannte “<a href="http://www.microsoft.com/en-us/download/details.aspx?id=29576">Async Targeting Pack</a>”. Für Nutzer von Visual Studio 2010 SP1 gibt es ein Provisorium, dass einem die meisten Vorzüge von async/await auch hier zur Verfügung stellt. Die “<a href="http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&amp;id=9983">Visual Studio Async CTP V3</a>” wird jedoch nicht offiziell von Microsoft unterstützt und hat ein paar bekannte Bugs. Auch wird sie nicht mehr weiterentwickelt, so dass man nach Erscheinen am besten schnellstmöglich auf die neue Version von Visual Studio updated. Solange es noch kein offizielles SDK für Windows Phone 8 gibt, hilft uns leider die Vorab-Version von VS2012 für die Entwicklung von Windows Phone Apps nicht weiter.</p>  <p>Man installiert also die Async CTP vom oben genannten Link, referenziert die DLL in seinem Windows Phone Projekt und schon kann es losgehen. Richtig? Naja, beinahe. Man hat Intellisense und auf den ersten Blick scheint alles zu funktionieren. Bis zu dem Zeitpunkt wenn man das Projekt builden möchte. Da fliegen einem auf einmal die seltsamsten Fehlermeldungen um die Ohren. Also alles für die Katz’? Nicht ganz, aber um das Async CTP zum laufen zu bekommen, müssen wir noch ein wenig Vorarbeit leisten.</p>  <p><a href="http://static.gordon-breuer.de/img/b1498c538e04_12599/31-07-2012-19-08-55.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="31-07-2012 19-08-55" border="0" alt="31-07-2012 19-08-55" src="http://anheledirwp.blob.core.windows.net/wordpress/2012/08/31-07-2012-19-08-55_thumb.png" width="414" height="84" /></a></p>  <p>Zunächst einmal müssen – sofern installiert – Silverlight 5 und das .NET-Framework in der Version 4.5 deinstalliert werden. Doch damit noch nicht genug. Als nächstes müssen ein paar der Visual Studio Updates entfernt werden. Diese finden wir ebenfalls in der Systemsteuerung.</p>  <p><a href="http://static.gordon-breuer.de/img/b1498c538e04_12599/SNAGHTMLc18537b.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="SNAGHTMLc18537b" border="0" alt="SNAGHTMLc18537b" src="http://anheledirwp.blob.core.windows.net/wordpress/2012/08/SNAGHTMLc18537b_thumb.png" width="410" height="161" /></a></p>  <p>In der Liste suchen wir nun die nachfolgenden Updates und entfernen sie. Nicht alle Updates sind auf jedem Rechner installiert, am einfachsten sucht man nach den jeweiligen Knowledge-Base Artikelnummern. Grundsätzlich sollten alle Updates für Visual Studio, die vor Oktober 2011 herauskamen, installiert sein – alle späteren jedoch nicht. Das betrifft vor allem die folgenden Updates:</p>  <ul>   <li>KB2635973 </li>    <li>KB2615527 </li>    <li>KB2645410 </li>    <li>KB2549864 </li> </ul>  <p>Einige dieser Patches tauchen mehrfach in der Liste der Systemsteuerung auf, in dem Fall müssen alle nacheinander deinstalliert werden!</p>  <p><a href="http://static.gordon-breuer.de/img/b1498c538e04_12599/SNAGHTMLc257992.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="SNAGHTMLc257992" border="0" alt="SNAGHTMLc257992" src="http://anheledirwp.blob.core.windows.net/wordpress/2012/08/SNAGHTMLc257992_thumb.png" width="410" height="188" /></a></p>  <p>Im Anschluss können wir nun endlich die Async CTP installieren! Und sobald die erfolgreich installiert wurde, können auch alle anderen – eben deinstallierten – Updates wieder neu installiert werden, einschließlich Silverlight 5 und .NET 4.5 (RC). Und endlich kann man auch mit Visual Studio 2010 SP1 an Windows Phone Projekten arbeiten, die “async” und “await” verwenden. </p>  <p>Und wer jetzt noch ein wenig über die asynchrone Entwicklung mit den neuen Schlüsselworten unter Windows Phone hören möchte, dem sei das folgende (englische) Video von Alex Turner empfohlen. <img style="border-bottom-style: none; border-left-style: none; border-top-style: none; border-right-style: none" class="wlEmoticon wlEmoticon-smile" alt="Smiley" src="http://anheledirwp.blob.core.windows.net/wordpress/2012/08/wlEmoticon-smile.png" /></p> <video controls poster="http://ak.channel9.msdn.com/ch9/e605/9cc5b6da-7ad6-44da-8683-9eb8011ce605/AlexTurnerAsyncCTPRefresh_512_ch9.jpg"><source type="video/mp4" src="http://ak.channel9.msdn.com/ch9/e605/9cc5b6da-7ad6-44da-8683-9eb8011ce605/AlexTurnerAsyncCTPRefresh_low_ch9.mp4" /><object type="application/x-silverlight-2" data="data:application/x-silverlight-2," width="512" height="288"> 		<param name="minRuntimeVersion" value="5.0.61118.0" /> 		<param name="source" value="http://channel9.msdn.com/scripts/Channel9.xap?v=1.15" /> 		<param name="initParams" value="mediaurl=http://smooth.ch9.ms/ch9/e605/9cc5b6da-7ad6-44da-8683-9eb8011ce605/AlexTurnerAsyncCTPRefresh.ism/manifest,thumbnail=http://ak.channel9.msdn.com/ch9/e605/9cc5b6da-7ad6-44da-8683-9eb8011ce605/AlexTurnerAsyncCTPRefresh_512_ch9.jpg,deliverymethod=adaptivestreaming,autoplay=false,entryid=9cc5b6da7ad644da86839eb8011ce605" /> 	</object></video>
