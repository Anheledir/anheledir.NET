---
layout: post
title: Versionsverwaltung unter Windows mit Subversion
category: .*
tags: []
---
<p><a href="http://www.aboutpixel.de/index.php4?toppage=imagedetails&amp;image_id=34773#34773" target="_blank"><img title="aboutpixel.de / Das A und O © Uwe Dreßler " style="border-top-width: 0px; border-left-width: 0px; border-bottom-width: 0px; margin: 0px 10px 0px 0px; border-right-width: 0px" height="133" alt="aboutpixel.de / Das A und O © Uwe Dreßler " src="http://anheledirwp.blob.core.windows.net/wordpress/2008/08/ap_34773_ordner_3.jpg" width="196" align="left" border="0" /></a> Sie werden sowohl von <strong>Programmierern</strong> als auch von <strong>Redaktionen</strong> eingesetzt, die meisten <strong>Content Management Systeme</strong> verwenden es und selbst <strong>Privatanwender</strong> setzen es oft ein ohne es überhaupt zu wissen. Die Rede ist von so genannten <strong>Versionsverwaltungen</strong>. Je nach Anwendungsfall können sie unterschiedliche Informationen erfassen. Allen gemein ist, dass sie unterschiedliche <strong>Versionen von Daten</strong> abspeichern und so den <strong>späteren Zugriff</strong> auf ältere Informationen ermöglichen. Im einfachsten Fall speichern Anwendungen wie Adobe Photoshop oder Microsoft Word solche Informationen mit den Anwendungsdaten. Mit Windows Vista bringt auch das Betriebssystem aus Redmond eine solche Funktion unter dem Namen „<em>Schattenkopien</em>“ mit.</p>  <p>[more]</p>  <h2>Einführung</h2>  <p>Unter Softwareentwicklern haben sich seit vielen Jahren zwei bzw. drei Systeme etabliert. Zum einen das kostenpflichte Produkt <strong>Visual SourceSafe </strong>von Microsoft und zum anderen <strong>CVS</strong> das seit einigen Jahren immer mehr von <strong>SVN</strong> abgelöst wird aufgrund der steten Weiterentwicklung. Beide letztgenannten sind sowohl <strong>kostenlos</strong> als auch unter einer <strong>Opensource-Lizenz</strong> verfügbar. Daneben gibt es noch zahlreiche weitere Produkte wie Mercurial oder ClearCase welche deutlich seltener zum Einsatz kommen aber sicherlich auch ihre Vorzüge haben.</p>  <p>Ich möchte mich in diesem Artikel auf Subversion, auch <strong>SVN</strong> abgekürzt, beschränken weil meine Erfahrungen hiermit am größten sind und die Einrichtung und Verwendung unter Windows leichter nicht sein könnte. Da es außerdem <strong>kostenlos</strong> ist, eine Unmenge an <strong>nützlichen Funktionen</strong> mitbringt und dazu noch eine sehr <strong>aktive Entwicklergemeinde</strong> hat ist es auch aufgrund seiner großen Verbreitung meiner Meinung nach die <strong>erste Wahl</strong> für „Neueinsteiger“ auf diesem Gebiet.</p>  <h2>Installation</h2>  <p>Wir können uns die Installation und Konfiguration des Subversion-Servers sehr vereinfachen seit die Firma <a href="http://www.visualsvn.com" target="_blank">VisualSVN Ltd.</a> ein ebenfalls kostenlos erhältliches Installationspaket geschnürt hat unter dem Namen <strong><a href="http://www.visualsvn.com/server/download/" target="_blank">VisualSVN-Server</a></strong>. Mit der aktuellen <strong>Version 1.5.2</strong>, die im Download lediglich<strong> 5 MB</strong> umfasst, wird sowohl <strong>Subversion</strong> in der neuesten stabilen <strong><a href="http://svn.collab.net/repos/svn/tags/1.5.1/CHANGES" target="_blank">Version 1.5.1</a></strong> installiert als auch ein auf das allernötigste reduzierter <strong>Apache-Webserver</strong> für den Zugriff und eine selbstprogrammierte <strong>Verwaltungskonsole</strong>. </p>  <p><a href="http://static.gordon-breuer.de/img/SubversionServerunterWindowseinrichten_1F0B/image_2.png" rel="lightbox[Subversion]"><img title="VisualSVN Server 1.5.2 Setup" style="border-top-width: 0px; border-left-width: 0px; border-bottom-width: 0px; margin: 0px 10px 0px 0px; border-right-width: 0px" height="105" alt="VisualSVN Server 1.5.2 Setup" src="http://anheledirwp.blob.core.windows.net/wordpress/2008/08/image_thumb.png" width="137" align="left" border="0" /></a> Nach dem Herunterladen des Pakets von der Website des Anbieters starten wir die Installation wofür administrative Rechte notwendig sind. Es wird nach dem <strong>Speicherort</strong> für das Programm und anschließend für den der <strong>Repositories</strong> gefragt. Unter einem Repository versteht man eine art <strong>Datenbank</strong>, in der alle zu einem Projekt gehörenden Dateien <strong>zusammengefasst</strong> und <strong>verwaltet</strong> werden. Zwar kann man auch in einem einzelnen Repository alle Projekte in einem eigenen Verzeichnis ablegen, hier kommt man jedoch schnell mit den Versionsnummern durcheinander da diese für das gesamte Repository gezählt werden. Der Speicherort der Repositories sollte genügend freien Speicherplatz bieten und kann auch auf einer anderen Festplatte sein. Zuletzt wählt man noch den zu verwendenden <strong>Port</strong> für den Webserver aus und ob eine <strong>verschlüsselte</strong> oder <strong>unverschlüsselte</strong> Verbindung verwendet werden soll. Da Ports nicht mehrfach belegt werden können sollte man hier nicht den Port <strong>80</strong> (<em>unverschlüsselte Verbindung</em>) bzw. <strong>443</strong> (<em>SSL-Verschlüsselte Verbindung</em>) verwenden wenn man zusätzlich bereits einen anderen Webserver lokal installiert hat (<em>bsp. den IIS</em>). Oft wird deshalb der Port <strong>8080</strong> oder auch <strong>8443</strong> verwendet (<em>Da beides beliebte Ausweichmöglichkeiten auch bei anderen Programmen wie bestimmten Proxies oder auch PLESK sind da leicht zu merken sollte man bereits im Vorfeld prüfen welcher Port für den Subversion-Server noch zur Verfügung steht</em>). Die Verwendung einer verschlüsselten Verbindung ist in jedem Fall zu empfehlen wenn der Server auch über ein Netzwerk (<em>LAN oder auch Internet</em>) erreichbar sein wird. Ein entsprechendes SSL-Zertifikat wird vom Installationsprogramm automatisch erstellt und eingerichtet. Ist der Subversion-Server nur vom lokalen Rechner aus erreichbar kann man sich das jedoch auch ersparen.</p>  <p>Hat man diese wenigen Schritte hinter sich gebracht wird der eigentliche Kopiervorgang gestartet und einen kurzen Moment später ist der Subversion-Server auch schon fertig installiert und betriebsfertig. Der eigentliche Server läuft im Hintergrund als Dienst, der ebenfalls eingerichtete Apache-Webserver vereinfacht den Zugriff auf die Repositories und läuft ebenfalls als Dienst.</p>  <h2>Unser erstes Repository</h2>  <p><a href="http://static.gordon-breuer.de/img/SubversionServerunterWindowseinrichten_1F0B/image_4.png" rel="lightbox[Subversion]"><img title="Computerverwaltung" style="border-top-width: 0px; border-left-width: 0px; border-bottom-width: 0px; margin: 0px 0px 0px 10px; border-right-width: 0px" height="41" alt="Computerverwaltung" src="http://anheledirwp.blob.core.windows.net/wordpress/2008/08/image_thumb_1.png" width="242" align="right" border="0" /></a> Wir finden den VisualSVN Server Manager als weiteres MMC-Addin in der Computerverwaltung und starten es. Im Übersichtsfenster sehen wir nun den Status des Servers, wieviele Benutzer existieren und wieviele Repositories. Wir klicken auf den Link „<strong>Create new repository…</strong>“ und werden aufgefordert einen Namen zu vergeben. <a href="http://static.gordon-breuer.de/img/SubversionServerunterWindowseinrichten_1F0B/image_6.png" rel="lightbox[Subversion]"><img title="Webbrowser mit Repository" style="border-top-width: 0px; border-left-width: 0px; border-bottom-width: 0px; margin: 10px 10px 0px 0px; border-right-width: 0px" height="85" alt="Webbrowser mit Repository" src="http://anheledirwp.blob.core.windows.net/wordpress/2008/08/image_thumb_2.png" width="111" align="left" border="0" /></a>Da wir diesen Namen auch beim Zugriff über den Webserver brauchen sollten Leer- und Sonderzeichen möglichst vermieden und stattdessen beispielsweise auf camelCase zurückgegriffen werden. Nach dem Bestätigen des Namens wird das Repository automatisch angelegt und im Server Manager ausgewählt. Somit ist unser Repository bereits fertig erstellt und kann nun über den mitinstallierten Webserver aufgerufen werden. Für den Zugriff auf das Repository gibt es verschiedene Tools, das wohl bekannteste ist <a href="http://tortoisesvn.tigris.org/" target="_blank">TortoiseSVN</a>, dass sich in den Windows-Explorer integriert.</p>  <h2>Benutzer und Gruppen</h2>  <p>Im Moment sind unsere Repositories noch für jeden einzusehen und – was noch schlimmer ist – auch für jeden änderbar. Was also noch fehlt ist eine Zugangskontrolle in Form eines Logins. Hier bietet uns der VisualSVN Server grundsätzlich zwei verschiedene Möglichkeiten an: Eine Authentifizierung mittels in Subversion verwalteter Benutzer und Gruppen oder aber die Verwendung der bereits in Windows angelegten Benutzer und Gruppen. In größeren Arbeitsgruppen ist letzteres am sinnvollsten, da über die einzelnen Windows-Benutzer auch andere Zugriffsrechte auf die Server verwaltet werden. Bei unserem lokalen Server sollen uns aber die Subversion-Benutzer ausreichen.</p>  <p>Bei der Installation wurde man im gleichen Dialog wie bei der Auswahl des Ports auch nach der gewünschten Authentifizierungsmethode gefragt. Möchte man diese noch mal ändern oder auch den Server Port oder das Verzeichnis für die Repositories so klickt man auf der linken Seite im Baumverzeichnis den VisualSVN Server rechts an und wählt „<em>Properties</em>“.</p>  <p><a href="http://static.gordon-breuer.de/img/SubversionServerunterWindowseinrichten_1F0B/image_8.png" rel="lightbox[Subversion]"><img title="Create new User" style="border-top-width: 0px; border-left-width: 0px; border-bottom-width: 0px; margin: 0px 10px 0px 0px; border-right-width: 0px" height="59" alt="Create new User" src="http://anheledirwp.blob.core.windows.net/wordpress/2008/08/image_thumb_3.png" width="105" align="left" border="0" /></a> Um das Beispiel ein wenig anschaulicher zu machen denken wir uns folgendes Szenario: Unser Projekt „<em>Hello World</em>“ wird von einem<strong> Programmierer Paul</strong> entwickelt und von einem <strong>Designer David</strong>. Außerdem haben wir noch eine kleine QS-Abteilung mit den beiden <strong>Testern Tim</strong> und <strong>Struppi</strong>. Zunächst müssen wir für jeden dieser Mitarbeiter einen eigenen Benutzeraccount in unserem Server anlegen. Hierfür klicken wir in der Baumstruktur auf den Ordner „Users“ mit der rechten Maustaste und wählen den obersten Punkt „<strong>Create User…</strong>“ aus. Es öffnet sich ein kleines Fenster in das wir den gewünschten Benutzernamen und das Passwort eingeben. Die Groß- und Kleinschreibung wird hier im Gegensatz zur Windowsanmeldung auch für den Benutzernamen beachtet! Wir erstellen hier also nacheinander unsere 4 Benutzer (<em>Paul, David, Tim, Struppi</em>). Um uns die Zuordnung der Rechte zu vereinfachen kann man noch zusätzliche Benutzergruppen anlegen denen man dann einzelne Benutzer zuweist. Beim Einstellen der Rechte für die Repositories kann man dann einfach einer kompletten Gruppe beispielsweise Schreib- und Leserechte einräumen ohne alle zu dieser Gruppe gehörigen Benutzer einzeln zu konfigurieren. Das hat vor allem dann Vorteile wenn wir einen neuen <strong>Programmierer Billy</strong> einstellen der nun ebenfalls die entsprechenden Rechte benötigt. Statt nun alle Repositories einzeln durchzugehen kann man Billy einfach in eine passende Benutzergruppe hinzufügen und er hat automatisch alle Rechte die dieser Gruppe zugeordnet wurden.</p>  <p><a href="http://static.gordon-breuer.de/img/SubversionServerunterWindowseinrichten_1F0B/image_12.png" rel="lightbox[Subversion]"><img title="Create new Group" style="border-top-width: 0px; border-left-width: 0px; border-bottom-width: 0px; margin: 0px 0px 0px 10px; border-right-width: 0px" height="130" alt="Create new Group" src="http://anheledirwp.blob.core.windows.net/wordpress/2008/08/image_thumb_5.png" width="126" align="right" border="0" /></a> Das Erstellen einer Gruppe geht im Prinzip genau so schnell vonstatten wie das Erstellen eines neuen Benutzers. Wir klicken zunächst in der Baumstruktur mit der rechten Maustaste auf den Ordner „Groups“ und wählen den obersten Menüpunkt „<strong>Create Group…</strong>“ aus. In dem sich öffnenden Fenster geben wir oben zunächst den Namen der Gruppe ein, zum Beispiel „<em>Development</em>“. Um nun Benutzer zu dieser Gruppe hinzuzufügen klickt man unten auf den Button „<em>Add…</em>“ und wählt aus der Liste nacheinander die gewünschten Benutzer aus. Auch bereits existierende Gruppen können hier hinzugefügt werden. So könnte man in unserem Beispiel zunächst eine Gruppe „<em>Programmierer</em>“ und eine Gruppe „<em>Designer</em>“ anlegen und dann diese beiden Gruppen schließlich zum „<em>Development</em>“ hinzufügen. Es lassen sich somit auch komplexere Strukturen in der Benutzerverwaltung abbilden wobei man es hier natürliich wie überall auch übertreiben kann. Erstellen wir also einfach noch eine zweite Gruppe „<em>QS</em>“ und fügen unsere Tester Tim und Struppi hinzu.</p>  <p><a href="http://static.gordon-breuer.de/img/SubversionServerunterWindowseinrichten_1F0B/image_14.png" rel="lightbox[Subversion]"><img title="Rechtevergabe für das Repository" style="border-top-width: 0px; border-left-width: 0px; border-bottom-width: 0px; margin: 5px 10px 0px 0px; border-right-width: 0px" height="132" alt="Rechtevergabe für das Repository" src="http://anheledirwp.blob.core.windows.net/wordpress/2008/08/image_thumb_6.png" width="105" align="left" border="0" /></a> Fehlt jetzt also nur noch die Zuweisung entsprechender Rechte: Wir klicken unser Repository „<em>HelloWorld</em>“ mit der rechten Maustaste an und wählen die „<em>Properties…</em>“ aus. Auf der ersten Registerkarte „<em>Security</em>“ finden wir standartmäßig den Gruppennamen „<em>Everyone</em>“. Da wir unser Repository nicht-öffentlich setzen wollen klicken wir zunächst diese Gruppe an und wählen dann im unteren Teil des Dialogs „<em>No Access</em>“ aus. Die entsprechende Rechteangabe sollte sich nun in der oberen Liste entsprechend angepasst haben. Ein kleiner roter Stern beim Icon der Gruppe zeigt uns an, dass die Standarteinstellungen verändert wurden. Diese kann man im übrigen festlegen wenn man die Rechte nicht für ein einzelnes Repository festlegt sondern für den übergeordneten Zweig „<em>Repositories</em>“. Fügen wir nun aber erst mal mit dem Button „<em>Add…</em>“ unsere Gruppe „<em>Development</em>“ hinzu. Standartmäßig erhalten neu hinzugefügte Gruppen automatisch Schreib- und Leserechte, was in diesem Fall auch beabsichtigt ist. Als weitere Gruppe fügen wir noch „QS“ hinzu, ändern bei dieser Gruppe aber die Rechte auf „Read Only“, da diese nur den aktuellen Entwicklungsstand einsehen aber nicht verändern sollen. Wurde alles richtig konfiguriert sollten die Eigenschaften nun so ähnlich aussehen wir im nebenstehenden Bild.</p>  <h2>Übernahme bestehender Repositories</h2>  <p>Wer bereits einen Subversion-Server per Hand eingerichtet hat und gerne auf die Verwaltungsoberfläche des VisualSVN-Servers zurückgreifen möchte der kann mit nur wenigen Mausklicks seine bereits existierenden Repositories importieren. Wir klicken hierfür auf den übergeordneten Zweig „<em>Repositories</em>“ und wählen im Kontextmenü den Punkt „<em>Alle Aufgaben</em> – <em>Import Existing Repository</em>“ aus. Es öffnet sich eine kleine Dialogbox in der wir lediglich den Pfad zum bereits existierenden Repository auswählen und darunter dann einen (neuen) Namen eingeben. Der VisualSVN Server legt ein neues Repository unter diesem Namen in seinem eigenen Verzeichnis an und kopiert die Daten vom alten Speicherort herüber. Anschließend kann man das Repository wie jedes andere auch über die Oberfläche verwalten. Hat der Import fehlerfrei funktioniert kann man das alte Repository auch löschen um Speicherplatz freizugeben.</p>
